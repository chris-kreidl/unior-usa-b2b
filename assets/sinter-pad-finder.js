var l=Object.defineProperty;var n=(i,a,t)=>a in i?l(i,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[a]=t;var s=(i,a,t)=>(n(i,typeof a!="symbol"?a+"":a,t),t);class d extends HTMLElement{constructor(){super();s(this,"apiUrl");s(this,"mfrSelect");s(this,"modelSelect");s(this,"padForm");s(this,"padFormButton");s(this,"padFormButtonText");this.apiUrl="https://us-central1-sinter-pad-finder.cloudfunctions.net/getPads",this.mfrSelect=this.querySelector("#padFinderMfrSelect"),this.modelSelect=this.querySelector("#padFinderModelSelect"),this.padForm=this.querySelector("#padFinderForm"),this.padFormButton=this.querySelector("#padFinderFormButton"),this.padFormButtonText=this.querySelector("#padFormButtonText"),this.mfrSelect.addEventListener("click",this.loadModels.bind(this)),this.modelSelect.addEventListener("click",this.loadPadLink.bind(this)),this.loadBrands()}async loadBrands(){try{const e=await(await fetch(`${this.apiUrl}/brands`,{signal:AbortSignal.timeout(500)})).json();Object.keys(e).forEach(o=>{const r=document.createElement("option");r.text=e[o].name,r.value=o,this.mfrSelect.add(r)})}catch{this.resetForm()}}async loadModels(){if(await this.clearSelect(this.modelSelect),this.resetForm(),this.mfrSelect.value!=="")try{const e=await(await fetch(`${this.apiUrl}/${this.mfrSelect.value}`,{signal:AbortSignal.timeout(500)})).json();Object.keys(e.models).forEach(o=>{const r=document.createElement("option");r.text=e.models[o].name,r.value=o,this.modelSelect.add(r)})}catch{this.resetForm("Error loading models. Please try again")}}async loadPadLink(){if(this.modelSelect.value===""){this.resetForm();return}if(this.resetForm("Loading..."),this.mfrSelect.value!==""&&this.modelSelect.value!="")try{const e=await(await fetch(`${this.apiUrl}/${this.mfrSelect.value}/${this.modelSelect.value}`,{signal:AbortSignal.timeout(500)})).json();e.linkB2B!==""?(this.padForm.action=e.linkB2B,this.padFormButton.disabled=!1,this.padFormButtonText.innerText="Shop Now"):this.resetForm("Sorry, we don't stock this pad yet.")}catch{this.resetForm("Error loading pad data. Please try again.")}}async clearSelect(t){t.querySelectorAll(':not([value=""])').forEach(e=>{e.remove()})}resetForm(t="Select a Caliper"){this.padForm.action="#",this.padFormButton.disabled=!0,this.padFormButtonText.innerText=t}}customElements.define("sinter-pad-finder",d);
